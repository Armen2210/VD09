<!DOCTYPE html>
<html lang="en"> <!-- Указываем язык документа -->

<head>
    <meta charset="UTF-8"> <!-- Кодировка UTF-8, чтобы корректно отображать русский язык -->
    <title>Title</title> <!-- Заголовок вкладки браузера -->

    <!-- Подключение Bootstrap 5 CSS (добавлено ранее для красивого оформления интерфейса).
         Этот CDN загружает стили, которые используются в index.html, login.html и register.html -->
    <link
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
        rel="stylesheet">
</head>

<body class="bg-light"> <!-- bg-light — светлый фон страницы -->

<!-- Навигационная панель -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container">
        <!-- Логотип-ссылка на главную страницу -->
        <a class="navbar-brand" href="{{ url_for('index') }}">Игра</a>

        <!-- Кнопка-гамбургер, появляется на мобильных устройствах -->
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarNav" aria-controls="navbarNav"
                aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <!-- Блок навигационных ссылок -->
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto">

                <!-- Проверяем: если пользователь авторизован -->
                {% if current_user.is_authenticated %}
                    <li class="nav-item">
                        <!-- Выводим имя пользователя -->
                        <span class="navbar-text me-3">
                            Привет, {{ current_user.username }}!
                        </span>
                    </li>

                    <!-- Ссылка выхода из аккаунта -->
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('logout') }}">Выход из аккаунта</a>
                    </li>

                {% else %}
                    <!-- Если НЕ авторизован — показать ссылки входа/регистрации -->
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('login') }}">Вход в аккаунт</a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('register') }}">Регистрация</a>
                    </li>
                {% endif %}

            </ul>
        </div>
    </div>
</nav>

<!-- Основная часть страницы -->
<main class="container mt-4">

    <!-- Вывод flash-сообщений (успех/ошибка/предупреждение) -->
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <!-- alert-{{ category }} — Bootstrap-класс для разной цветовой окраски -->
                <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
                    {{ message }}
                    <!-- Кнопка закрытия уведомления -->
                    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                </div>
            {% endfor %}
        {% endif %}
    {% endwith %}

    <!-- Место, куда другие страницы вставляют своё содержимое -->
    {% block content %}
    {% endblock %}

</main>

<!-- Подключение Bootstrap JS — нужно для работы модальных окон, выпадающих меню и т.п. -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
